# VPS Provisioner MCP Server

MCP (Model Context Protocol) —Å–µ—Ä–≤–µ—Ä –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è VPS Provisioner API —á–µ—Ä–µ–∑ Claude Desktop –∏ Claude Code.

## –ß—Ç–æ —ç—Ç–æ —Ç–∞–∫–æ–µ?

–≠—Ç–æ—Ç MCP —Å–µ—Ä–≤–µ—Ä –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç Claude –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –Ω–∞ VPS —Å–µ—Ä–≤–µ—Ä–∞—Ö —á–µ—Ä–µ–∑ –ø—Ä–æ—Å—Ç—ã–µ —Ç–µ–∫—Å—Ç–æ–≤—ã–µ –∫–æ–º–∞–Ω–¥—ã. –í—ã –º–æ–∂–µ—Ç–µ –ø–æ–ø—Ä–æ—Å–∏—Ç—å Claude "–£—Å—Ç–∞–Ω–æ–≤–∏ n8n –Ω–∞ –º–æ–π —Å–µ—Ä–≤–µ—Ä 45.67.217.107" –∏ –æ–Ω —Å–¥–µ–ª–∞–µ—Ç —ç—Ç–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏, –∏—Å–ø–æ–ª—å–∑—É—è VPS Provisioner API.

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

MCP —Å–µ—Ä–≤–µ—Ä –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç 6 –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ (tools):

### 1. `deploy_app` - –†–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏–µ –≥–æ—Ç–æ–≤—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π

–ë—ã—Å—Ç—Ä–æ–µ —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏–µ pre-configured –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –∏–∑ —Å–ø–∏—Å–∫–∞:
- **n8n** - workflow automation
- **wireguard** - VPN —Å–µ—Ä–≤–µ—Ä
- **outline** - Wiki/–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- **vaultwarden** - –º–µ–Ω–µ–¥–∂–µ—Ä –ø–∞—Ä–æ–ª–µ–π
- **3x-ui** - –ø–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è Xray
- **seafile** - –æ–±–ª–∞—á–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ
- **filebrowser** - —Ñ–∞–π–ª–æ–≤—ã–π –º–µ–Ω–µ–¥–∂–µ—Ä

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `ip_address` (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ) - IP –∞–¥—Ä–µ—Å VPS
- `username` (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ) - SSH –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å (–æ–±—ã—á–Ω–æ root)
- `password` (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ) - SSH –ø–∞—Ä–æ–ª—å
- `app` (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ) - –Ω–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- `custom_domain` (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –¥–æ–º–µ–Ω

**–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ Claude:**
```
–†–∞–∑–≤–µ—Ä–Ω–∏ n8n –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ 151.245.136.197
–õ–æ–≥–∏–Ω: root
–ü–∞—Ä–æ–ª—å: MyPassword123
```

### 2. `deploy_universal` - –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ–µ —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏–µ

–†–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏–µ –õ–Æ–ë–û–ì–û Docker –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏–∑:
- Docker Compose —Ñ–∞–π–ª–∞
- Docker –æ–±—Ä–∞–∑–∞
- GitHub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `ip_address` (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
- `username` (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
- `password` (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
- `source_type` (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ) - —Ç–∏–ø –∏—Å—Ç–æ—á–Ω–∏–∫–∞: `docker-compose`, `docker-image`, `github-repo`
- `source_url` (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ) - URL –∏—Å—Ç–æ—á–Ω–∏–∫–∞
- `app_name` (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ) - –Ω–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- `ports` (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) - –º–∞–ø–ø–∏–Ω–≥ –ø–æ—Ä—Ç–æ–≤, –Ω–∞–ø—Ä–∏–º–µ—Ä `{"3001": "3001"}`
- `env_vars` (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) - –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è, –Ω–∞–ø—Ä–∏–º–µ—Ä `{"API_KEY": "xyz"}`
- `max_memory_mb` (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) - –ª–∏–º–∏—Ç –ø–∞–º—è—Ç–∏ –≤ MB
- `max_cpu` (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) - –ª–∏–º–∏—Ç CPU —è–¥–µ—Ä

**–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:**
```
–†–∞–∑–≤–µ—Ä–Ω–∏ Ghost blog –∏–∑ Docker –æ–±—Ä–∞–∑–∞ ghost:latest –Ω–∞ –ø–æ—Ä—Ç—É 2368
IP: 45.67.217.107, root/password123
```

### 3. `check_status` - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞

–ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Ç–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å deployment –∑–∞–¥–∞—á–∏.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `job_id` (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ) - ID –∑–∞–¥–∞—á–∏

**–ü—Ä–∏–º–µ—Ä:**
```
–ü—Ä–æ–≤–µ—Ä—å —Å—Ç–∞—Ç—É—Å –∑–∞–¥–∞—á–∏ abc-123-def
```

### 4. `wait_for_completion` - –û–∂–∏–¥–∞–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è

–û–∂–∏–¥–∞–µ—Ç –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è deployment —Å –ø–æ–∫–∞–∑–æ–º –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `job_id` (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ) - ID –∑–∞–¥–∞—á–∏
- `timeout` (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) - —Ç–∞–π–º–∞—É—Ç –≤ —Å–µ–∫—É–Ω–¥–∞—Ö (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 1800 = 30 –º–∏–Ω—É—Ç)

**–ü—Ä–∏–º–µ—Ä:**
```
–î–æ–∂–¥–∏—Å—å –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ n8n (job_id: abc-123)
```

### 5. `list_jobs` - –°–ø–∏—Å–æ–∫ –∑–∞–¥–∞—á

–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –Ω–µ–¥–∞–≤–Ω–∏—Ö deployment –∑–∞–¥–∞—á.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `limit` (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–¥–∞—á (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 10)
- `status` (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) - —Ñ–∏–ª—å—Ç—Ä –ø–æ —Å—Ç–∞—Ç—É—Å—É: `pending`, `running`, `completed`, `failed`

**–ü—Ä–∏–º–µ—Ä:**
```
–ü–æ–∫–∞–∂–∏ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 5 –∑–∞–≤–µ—Ä—à—ë–Ω–Ω—ã—Ö —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏–π
```

### 6. `get_stats` - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –æ–±—â—É—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É VPS Provisioner.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:** –Ω–µ—Ç

**–ü—Ä–∏–º–µ—Ä:**
```
–ü–æ–∫–∞–∂–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–æ –≤—Å–µ–º —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏—è–º
```

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–∞ VPS

### –®–∞–≥ 1: –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ VPS

```bash
ssh root@45.67.217.107
cd /opt/vps
```

### –®–∞–≥ 2: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Python –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
pip3 install -r mcp_server/requirements.txt
```

### –®–∞–≥ 3: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

–ï—Å–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥—Ä—É–≥–æ–π URL –∏–ª–∏ API –∫–ª—é—á:

```bash
cd mcp_server
cp .env.example .env
nano .env
```

–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `.env` —Ñ–∞–π–ª:
```bash
PROVISIONER_URL=http://localhost:5001
API_KEY=–≤–∞—à-api-–∫–ª—é—á
```

### –®–∞–≥ 4: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ systemd service (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

–î–ª—è –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫–∞ MCP —Å–µ—Ä–≤–µ—Ä–∞ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ —Å–∏—Å—Ç–µ–º—ã:

```bash
# –ö–æ–ø–∏—Ä—É–µ–º service —Ñ–∞–π–ª
cp /opt/vps/mcp_server/vps-provisioner-mcp.service /etc/systemd/system/

# –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ–º systemd
systemctl daemon-reload

# –í–∫–ª—é—á–∞–µ–º –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫
systemctl enable vps-provisioner-mcp

# –ó–∞–ø—É—Å–∫–∞–µ–º —Å–µ—Ä–≤–∏—Å
systemctl start vps-provisioner-mcp

# –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å
systemctl status vps-provisioner-mcp

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
journalctl -u vps-provisioner-mcp -f
```

### –®–∞–≥ 5: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ MCP —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è:

```bash
cd /opt/vps/mcp_server
python3 vps_provisioner_mcp.py
```

–ï—Å–ª–∏ –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç, –≤—ã —É–≤–∏–¥–∏—Ç–µ:
```
2025-12-08 12:00:00 - vps-provisioner-mcp - INFO - Starting VPS Provisioner MCP Server
2025-12-08 12:00:00 - vps-provisioner-mcp - INFO - Provisioner URL: http://localhost:5001
2025-12-08 12:00:00 - vps-provisioner-mcp - INFO - API Key: ****4353
```

## –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Claude Desktop

### –í–∞—Ä–∏–∞–Ω—Ç 1: SSH —Ç—É–Ω–Ω–µ–ª—å (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

–≠—Ç–æ—Ç –≤–∞—Ä–∏–∞–Ω—Ç –∑–∞–ø—É—Å–∫–∞–µ—Ç MCP —Å–µ—Ä–≤–µ—Ä –Ω–∞–ø—Ä—è–º—É—é –Ω–∞ VPS —á–µ—Ä–µ–∑ SSH.

–û—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Claude Desktop:
- **macOS**: `~/Library/Application Support/Claude/claude_desktop_config.json`
- **Windows**: `%APPDATA%\Claude\claude_desktop_config.json`
- **Linux**: `~/.config/Claude/claude_desktop_config.json`

–î–æ–±–∞–≤—å—Ç–µ —Å–ª–µ–¥—É—é—â—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é:

```json
{
  "mcpServers": {
    "vps-provisioner": {
      "command": "ssh",
      "args": [
        "-T",
        "root@45.67.217.107",
        "python3 /opt/vps/mcp_server/vps_provisioner_mcp.py"
      ]
    }
  }
}
```

**–í–∞–∂–Ω–æ**: –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ SSH –∫–ª—é—á–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –±–µ–∑ –ø–∞—Ä–æ–ª—è:

```bash
# –ù–∞ –≤–∞—à–µ–º –ª–æ–∫–∞–ª—å–Ω–æ–º –∫–æ–º–ø—å—é—Ç–µ—Ä–µ
ssh-copy-id root@45.67.217.107
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –õ–æ–∫–∞–ª—å–Ω—ã–π SSH forward

–ï—Å–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ –∑–∞–ø—É—Å–∫–∞—Ç—å MCP —Å–µ—Ä–≤–µ—Ä –ª–æ–∫–∞–ª—å–Ω–æ, –Ω–æ –ø–æ–¥–∫–ª—é—á–∞—Ç—å—Å—è –∫ —É–¥–∞–ª—ë–Ω–Ω–æ–º—É API:

1. –°–æ–∑–¥–∞–π—Ç–µ SSH —Ç—É–Ω–Ω–µ–ª—å:
```bash
ssh -L 5001:localhost:5001 root@45.67.217.107 -N
```

2. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –ø–∞–ø–∫—É `mcp_server` –Ω–∞ –ª–æ–∫–∞–ª—å–Ω—ã–π –∫–æ–º–ø—å—é—Ç–µ—Ä

3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ Claude Desktop:
```json
{
  "mcpServers": {
    "vps-provisioner": {
      "command": "python3",
      "args": ["/path/to/local/mcp_server/vps_provisioner_mcp.py"],
      "env": {
        "PROVISIONER_URL": "http://localhost:5001",
        "API_KEY": "39bf160a-775d-4408-babb-5098cd3e4353"
      }
    }
  }
}
```

### –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ Claude Desktop

–ü–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:
1. –ü–æ–ª–Ω–æ—Å—Ç—å—é –∑–∞–∫—Ä–æ–π—Ç–µ Claude Desktop (Cmd+Q –Ω–∞ Mac, –∏–ª–∏ —á–µ—Ä–µ–∑ Task Manager)
2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ Claude Desktop —Å–Ω–æ–≤–∞
3. –û—Ç–∫—Ä–æ–π—Ç–µ –Ω–æ–≤—ã–π —á–∞—Ç
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ MCP —Å–µ—Ä–≤–µ—Ä –ø–æ–¥–∫–ª—é—á—ë–Ω (–¥–æ–ª–∂–µ–Ω –ø–æ—è–≤–∏—Ç—å—Å—è –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤)

## –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Claude Code

–î–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ Claude Code (CLI):

1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Claude Code:
```bash
npm install -g @anthropic/claude-code
```

2. –°–æ–∑–¥–∞–π—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ñ–∞–π–ª `~/.config/claude-code/config.json`:
```json
{
  "mcpServers": {
    "vps-provisioner": {
      "command": "ssh",
      "args": [
        "-T",
        "root@45.67.217.107",
        "python3 /opt/vps/mcp_server/vps_provisioner_mcp.py"
      ]
    }
  }
}
```

3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ Claude Code:
```bash
claude-code
```

## –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ü—Ä–∏–º–µ—Ä 1: –ë—ã—Å—Ç—Ä–æ–µ —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏–µ n8n

–í Claude Desktop –ø—Ä–æ—Å—Ç–æ –Ω–∞–ø–∏—à–∏—Ç–µ:
```
–†–∞–∑–≤–µ—Ä–Ω–∏ n8n –Ω–∞ –º–æ—ë–º VPS 151.245.136.197
–õ–æ–≥–∏–Ω: root
–ü–∞—Ä–æ–ª—å: SecurePassword123
```

Claude –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
1. –í—ã–∑–æ–≤–µ—Ç `deploy_app` —Å –Ω—É–∂–Ω—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
2. –ü–æ–ª—É—á–∏—Ç job_id
3. –í—ã–∑–æ–≤–µ—Ç `wait_for_completion` –¥–ª—è –æ–∂–∏–¥–∞–Ω–∏—è
4. –ü–æ–∫–∞–∂–µ—Ç —Ñ–∏–Ω–∞–ª—å–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Å URL –∏ credentials

### –ü—Ä–∏–º–µ—Ä 2: –†–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏–µ –∏–∑ GitHub

```
–†–∞–∑–≤–µ—Ä–Ω–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ Ghost blog –∏–∑ Docker –æ–±—Ä–∞–∑–∞ ghost:latest
–Ω–∞ —Å–µ—Ä–≤–µ—Ä 45.67.217.107 (root/password)
–ü–æ—Ä—Ç: 2368, –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è NODE_ENV=production
```

### –ü—Ä–∏–º–µ—Ä 3: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞

```
–ü—Ä–æ–≤–µ—Ä—å —Å—Ç–∞—Ç—É—Å –∑–∞–¥–∞—á–∏ abc-123-def-456
```

### –ü—Ä–∏–º–µ—Ä 4: –ü—Ä–æ—Å–º–æ—Ç—Ä –≤—Å–µ—Ö –∑–∞–¥–∞—á

```
–ü–æ–∫–∞–∂–∏ –≤—Å–µ –º–æ–∏ —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏—è –∑–∞ —Å–µ–≥–æ–¥–Ω—è
```

### –ü—Ä–∏–º–µ—Ä 5: –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

```
–°–∫–æ–ª—å–∫–æ –≤—Å–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –±—ã–ª–æ —Ä–∞–∑–≤—ë—Ä–Ω—É—Ç–æ?
–ü–æ–∫–∞–∂–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
```

## –õ–æ–≥–∏ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ MCP —Å–µ—Ä–≤–µ—Ä–∞

–ï—Å–ª–∏ MCP —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω –∫–∞–∫ systemd service:

```bash
# –í—Å–µ –ª–æ–≥–∏
journalctl -u vps-provisioner-mcp

# –ü–æ—Å–ª–µ–¥–Ω–∏–µ 100 —Å—Ç—Ä–æ–∫
journalctl -u vps-provisioner-mcp -n 100

# –í —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ (live)
journalctl -u vps-provisioner-mcp -f

# –ó–∞ —Å–µ–≥–æ–¥–Ω—è
journalctl -u vps-provisioner-mcp --since today

# –ó–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–π —á–∞—Å
journalctl -u vps-provisioner-mcp --since "1 hour ago"
```

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å—Ç–∞—Ç—É—Å–∞ —Å–µ—Ä–≤–∏—Å–∞

```bash
# –°—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–∏—Å–∞
systemctl status vps-provisioner-mcp

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫
systemctl restart vps-provisioner-mcp

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞
systemctl stop vps-provisioner-mcp

# –ó–∞–ø—É—Å–∫
systemctl start vps-provisioner-mcp
```

## Troubleshooting

### MCP —Å–µ—Ä–≤–µ—Ä –Ω–µ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –≤ Claude Desktop

**–ü—Ä–æ–±–ª–µ–º–∞**: Claude Desktop –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã MCP

**–†–µ—à–µ–Ω–∏–µ**:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ Claude Desktop:
   - macOS: `~/Library/Logs/Claude/`
   - Windows: `%APPDATA%\Claude\logs\`

2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ SSH –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ:
   ```bash
   ssh root@45.67.217.107 "python3 /opt/vps/mcp_server/vps_provisioner_mcp.py"
   ```

3. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ SSH –∫–ª—é—á–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã (–±–µ–∑ –∑–∞–ø—Ä–æ—Å–∞ –ø–∞—Ä–æ–ª—è)

4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–æ—Ä–º–∞—Ç JSON –≤ `claude_desktop_config.json` (–≤–∞–ª–∏–¥–Ω–æ—Å—Ç—å)

### –û—à–∏–±–∫–∞ "Connection refused"

**–ü—Ä–æ–±–ª–µ–º–∞**: MCP —Å–µ—Ä–≤–µ—Ä –Ω–µ –º–æ–∂–µ—Ç –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ Provisioner API

**–†–µ—à–µ–Ω–∏–µ**:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ VPS Provisioner –∑–∞–ø—É—â–µ–Ω:
   ```bash
   systemctl status vps-provisioner
   curl http://localhost:5001/health
   ```

2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:
   ```bash
   echo $PROVISIONER_URL
   echo $API_KEY
   ```

3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ API –¥–æ—Å—Ç—É–ø–µ–Ω:
   ```bash
   curl -H "X-API-Key: 39bf160a-775d-4408-babb-5098cd3e4353" http://localhost:5001/stats
   ```

### –¢–∞–π–º–∞—É—Ç –ø—Ä–∏ —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏–∏

**–ü—Ä–æ–±–ª–µ–º–∞**: `wait_for_completion` –∑–∞–∫–∞–Ω—á–∏–≤–∞–µ—Ç—Å—è —Ç–∞–π–º–∞—É—Ç–æ–º

**–†–µ—à–µ–Ω–∏–µ**:
1. –£–≤–µ–ª–∏—á—å—Ç–µ —Ç–∞–π–º–∞—É—Ç –≤ –∑–∞–ø—Ä–æ—Å–µ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 1800 —Å–µ–∫—É–Ω–¥ = 30 –º–∏–Ω—É—Ç)
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å –≤—Ä—É—á–Ω—É—é —á–µ—Ä–µ–∑ `check_status`
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ VPS Provisioner:
   ```bash
   journalctl -u vps-provisioner -f
   ```

### Python –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã

**–ü—Ä–æ–±–ª–µ–º–∞**: ModuleNotFoundError –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ

**–†–µ—à–µ–Ω–∏–µ**:
```bash
pip3 install -r /opt/vps/mcp_server/requirements.txt

# –ò–ª–∏ –≥–ª–æ–±–∞–ª—å–Ω–æ
pip3 install mcp requests
```

### SSH "Permission denied"

**–ü—Ä–æ–±–ª–µ–º–∞**: Claude Desktop –Ω–µ –º–æ–∂–µ—Ç –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è —á–µ—Ä–µ–∑ SSH

**–†–µ—à–µ–Ω–∏–µ**:
1. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ SSH –∫–ª—é—á–∏:
   ```bash
   ssh-keygen -t ed25519
   ssh-copy-id root@45.67.217.107
   ```

2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ SSH –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é:
   ```bash
   ssh -v root@45.67.217.107
   ```

3. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ SSH –∞–≥–µ–Ω—Ç –∑–∞–ø—É—â–µ–Ω:
   ```bash
   eval "$(ssh-agent -s)"
   ssh-add ~/.ssh/id_ed25519
   ```

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

1. **–ù–µ —Ö—Ä–∞–Ω–∏—Ç–µ –ø–∞—Ä–æ–ª–∏ –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏** - –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ SSH –∫–ª—é—á–∏
2. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–∏–ª—å–Ω—ã–π API –∫–ª—é—á** - –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥–µ—Ñ–æ–ª—Ç–Ω—ã–π –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ
3. **–û–≥—Ä–∞–Ω–∏—á—å—Ç–µ –¥–æ—Å—Ç—É–ø –∫ VPS** - –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ firewall (ufw)
4. **–†–µ–≥—É–ª—è—Ä–Ω–æ –æ–±–Ω–æ–≤–ª—è–π—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**:
   ```bash
   pip3 install --upgrade mcp requests
   ```

### –°–º–µ–Ω–∞ API –∫–ª—é—á–∞

–ï—Å–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ —Å–º–µ–Ω–∏—Ç—å API –∫–ª—é—á:

1. –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ systemd service:
   ```bash
   nano /etc/systemd/system/vps-provisioner-mcp.service
   ```

2. –ò–∑–º–µ–Ω–∏—Ç–µ —Å—Ç—Ä–æ–∫—É —Å `API_KEY`:
   ```ini
   Environment="API_KEY=–≤–∞—à-–Ω–æ–≤—ã–π-–∫–ª—é—á"
   ```

3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–∏—Å:
   ```bash
   systemctl daemon-reload
   systemctl restart vps-provisioner-mcp
   ```

## –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ MCP —Å–µ—Ä–≤–µ—Ä–∞

–ü—Ä–∏ –≤—ã—Ö–æ–¥–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π:

```bash
# –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ VPS
ssh root@45.67.217.107
cd /opt/vps

# –û–±–Ω–æ–≤–∏—Ç–µ –∫–æ–¥ (git pull –∏–ª–∏ –∑–∞–º–µ–Ω–∏—Ç–µ —Ñ–∞–π–ª—ã)
git pull origin main

# –û–±–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
pip3 install --upgrade -r mcp_server/requirements.txt

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–∏—Å
systemctl restart vps-provisioner-mcp

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏
journalctl -u vps-provisioner-mcp -f
```

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Claude Desktop ‚îÇ
‚îÇ   –∏–ª–∏ Code      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ MCP Protocol
         ‚îÇ (stdio)
         ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   SSH Tunnel    ‚îÇ
‚îÇ root@VPS:5001   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ
         ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  MCP Server     ‚îÇ
‚îÇ vps_provisioner ‚îÇ
‚îÇ   _mcp.py       ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ HTTP/REST
         ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ VPS Provisioner ‚îÇ
‚îÇ   API (Flask)   ‚îÇ
‚îÇ  localhost:5001 ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ SSH + Docker
         ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   Target VPS    ‚îÇ
‚îÇ  Applications   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –§–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–æ–≤

–í—Å–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç —Å —ç–º–æ–¥–∑–∏ –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞ —á—Ç–µ–Ω–∏—è:
- ‚úÖ –£—Å–ø–µ—à–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
- ‚ùå –û—à–∏–±–∫–∏
- ‚è≥ –û–∂–∏–¥–∞–Ω–∏–µ
- ‚öôÔ∏è –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ
- üìã –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
- üîê Credentials

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

MCP —Å–µ—Ä–≤–µ—Ä –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –≤—Å–µ —Ç–∏–ø—ã –æ—à–∏–±–æ–∫:
- Network timeouts
- Connection errors
- HTTP errors
- API errors
- Invalid parameters

–í—Å–µ –æ—à–∏–±–∫–∏ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –≤ journalctl –∏ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç—Å—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –≤ —á–∏—Ç–∞–µ–º–æ–º —Ñ–æ—Ä–º–∞—Ç–µ.

### Polling –¥–ª—è wait_for_completion

–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç `wait_for_completion` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç polling –∫–∞–∂–¥—ã–µ 10 —Å–µ–∫—É–Ω–¥ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å—Ç–∞—Ç—É—Å–∞. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ –±–µ–∑ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏.

## –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ï—Å–ª–∏ —É –≤–∞—Å –≤–æ–∑–Ω–∏–∫–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã:

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ MCP —Å–µ—Ä–≤–µ—Ä–∞: `journalctl -u vps-provisioner-mcp -f`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ VPS Provisioner: `journalctl -u vps-provisioner -f`
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ Claude Desktop (—Å–º. Troubleshooting)
4. –°–æ–∑–¥–∞–π—Ç–µ issue –≤ GitHub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏: https://github.com/technoob228/vps/issues

## –°—Å—ã–ª–∫–∏

- [Model Context Protocol](https://modelcontextprotocol.io/)
- [MCP Python SDK](https://github.com/modelcontextprotocol/python-sdk)
- [MCP Specification](https://spec.modelcontextprotocol.io/)
- [VPS Provisioner Repository](https://github.com/technoob228/vps)

## –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License - —Å–º. LICENSE —Ñ–∞–π–ª –≤ –∫–æ—Ä–Ω–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

---

**–í–µ—Ä—Å–∏—è**: 1.0.0
**–ê–≤—Ç–æ—Ä**: VPS Provisioner Team
**–î–∞—Ç–∞**: 2025-12-08
