# VPS Provisioner v2.0 - –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Ñ–∞–π–ª–æ–≤

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (—á–∏—Ç–∞–π —ç—Ç–æ —Å–Ω–∞—á–∞–ª–∞!)

1. **ANSWERS.md** ‚≠ê –ù–ê–ß–ù–ò –° –≠–¢–û–ì–û
   - –û—Ç–≤–µ—Ç—ã –Ω–∞ —Ç–≤–æ–∏ –≤–æ–ø—Ä–æ—Å—ã
   - –†–µ—à–µ–Ω–∏—è –ø–æ VPN (3X-UI vs Nekoray)
   - –†–µ—à–µ–Ω–∏—è –ø–æ Notion (Outline)
   - –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —Å–µ—Ä–≤–µ—Ä—É
   - –ú–∞—Ä–∫–µ—Ç–∏–Ω–≥ —Å–æ–≤–µ—Ç—ã

2. **QUICKSTART.md** ‚≠ê –ë–´–°–¢–†–´–ô –°–¢–ê–†–¢
   - –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞ 5 –º–∏–Ω—É—Ç
   - –ö–∞–∫ –∑–∞–ø—É—Å—Ç–∏—Ç—å (dev –∏ production)
   - –ü—Ä–∏–º–µ—Ä—ã API calls
   - Troubleshooting
   - –ù–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ

3. **README.md**
   - –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º
   - –û–ø–∏—Å–∞–Ω–∏–µ –≤—Å–µ—Ö endpoints
   - Security best practices
   - –ö–∞–∫ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

4. **PROJECT_STRUCTURE.md**
   - –î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
   - –ß—Ç–æ –¥–µ–ª–∞–µ—Ç –∫–∞–∂–¥—ã–π —Ñ–∞–π–ª
   - –ü–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö
   - –ö–∞–∫ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞—Ç—å

---

## üêç Python –∫–æ–¥ (–æ—Å–Ω–æ–≤–Ω—ã–µ —Ñ–∞–π–ª—ã)

### –ì–ª–∞–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:
- **app.py** - Flask —Å–µ—Ä–≤–µ—Ä, REST API, —Ñ–æ–Ω–æ–≤—ã–µ –≤–æ—Ä–∫–µ—Ä—ã

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏ —É—Ç–∏–ª–∏—Ç—ã:
- **config.py** - –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —á–µ—Ä–µ–∑ environment variables
- **storage.py** - SQLite –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –¥–∂–æ–±–æ–≤
- **validation.py** - –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- **auth.py** - API key authentication
- **ssh_utils.py** - SSH —É—Ç–∏–ª–∏—Ç—ã –∏ helper —Ñ—É–Ω–∫—Ü–∏–∏

### Provisioners (—É—Å—Ç–∞–Ω–æ–≤—â–∏–∫–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π):
- **provisioners/n8n.py** - n8n workflow automation
- **provisioners/wireguard.py** - WireGuard VPN
- **provisioners/outline.py** - Outline wiki/docs
- **provisioners/vaultwarden.py** - Vaultwarden password manager
- **provisioners/x3ui.py** - 3X-UI VPN panel (VMess/VLESS/Trojan)
- **provisioners/filebrowser.py** - FileBrowser file manager
- **provisioners/__init__.py** - Package init

---

## üêö Bash —Å–∫—Ä–∏–ø—Ç—ã (—É—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–∞ VPS)

- **templates/n8n_install.sh** - –£—Å—Ç–∞–Ω–æ–≤–∫–∞ n8n
- **templates/wireguard_install.sh** - –£—Å—Ç–∞–Ω–æ–≤–∫–∞ WireGuard
- **templates/outline_install.sh** - –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Outline
- **templates/vaultwarden_install.sh** - –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Vaultwarden
- **templates/3x-ui_install.sh** - –£—Å—Ç–∞–Ω–æ–≤–∫–∞ 3X-UI
- **templates/filebrowser_install.sh** - –£—Å—Ç–∞–Ω–æ–≤–∫–∞ FileBrowser

---

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏ –¥–µ–ø–ª–æ–π

- **requirements.txt** - Python –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- **.env.example** - –ü—Ä–∏–º–µ—Ä environment variables
- **vps-provisioner.service** - Systemd service —Ñ–∞–π–ª
- **test_api.py** - –¢–µ—Å—Ç–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ API

---

## üìä –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

| # | –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ | –û–ø–∏—Å–∞–Ω–∏–µ | RAM | –£—Å—Ç–∞–Ω–æ–≤–∫–∞ | –ò–¥–µ–∞–ª–µ–Ω –¥–ª—è |
|---|------------|----------|-----|-----------|-------------|
| 1 | **n8n** | Workflow automation (Zapier alt) | 300MB | 5-10 –º–∏–Ω | –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è |
| 2 | **WireGuard** | Modern VPN with UI | 50MB | 5-10 –º–∏–Ω | –ë–∞–∑–æ–≤—ã–π VPN |
| 3 | **Outline** | Wiki/docs (Notion alt) | 500MB | 10-15 –º–∏–Ω | –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è |
| 4 | **Vaultwarden** | Password manager (Bitwarden) | 30MB | 3-5 –º–∏–Ω | –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å |
| 5 | **3X-UI** | Advanced VPN panel | 100MB | 5-10 –º–∏–Ω | –û–±—Ö–æ–¥ —Ü–µ–Ω–∑—É—Ä—ã üá∑üá∫ |
| 6 | **FileBrowser** | Lightweight file manager | 30MB | 3-5 –º–∏–Ω | –§–∞–π–ª–æ–æ–±–º–µ–Ω |

---

## üéØ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç (5 –º–∏–Ω—É—Ç)

### 1. –°–∫–∞—á–∞–π –≤—Å–µ —Ñ–∞–π–ª—ã
```bash
# –í—Å–µ —Ñ–∞–π–ª—ã –∏–∑ /outputs/ –ø–æ–ª–æ–∂–∏ –≤ /opt/vps-provisioner
```

### 2. –£—Å—Ç–∞–Ω–æ–≤–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
```bash
cd /opt/vps-provisioner
pip install -r requirements.txt
```

### 3. –ù–∞—Å—Ç—Ä–æ–π
```bash
cp .env.example .env
nano .env  # –ü–æ—Å—Ç–∞–≤—å API_KEY
```

### 4. –ó–∞–ø—É—Å—Ç–∏
```bash
# Development
python app.py

# Production
cp vps-provisioner.service /etc/systemd/system/
systemctl enable vps-provisioner
systemctl start vps-provisioner
```

### 5. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π
```bash
python test_api.py 95.179.200.45 root password n8n
```

---

## üìñ –ö–∞–∫–æ–π —Ñ–∞–π–ª —á–∏—Ç–∞—Ç—å?

### –•–æ—á–µ—à—å –±—ã—Å—Ç—Ä–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å?
‚Üí **QUICKSTART.md**

### –•–æ—á–µ—à—å –ø–æ–Ω—è—Ç—å –∫–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç?
‚Üí **PROJECT_STRUCTURE.md**

### –•–æ—á–µ—à—å –ø–æ–ª–Ω—É—é –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é?
‚Üí **README.md**

### –•–æ—á–µ—à—å –æ—Ç–≤–µ—Ç—ã –Ω–∞ —Å–≤–æ–∏ –≤–æ–ø—Ä–æ—Å—ã?
‚Üí **ANSWERS.md** ‚≠ê

### –•–æ—á–µ—à—å –ø—Ä–æ—Å—Ç–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å?
```bash
python app.py
python test_api.py YOUR_IP root password n8n
```

---

## üîß –ß—Ç–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –∏–∑ —Ç–≤–æ–µ–≥–æ –∫–æ–¥–∞

### –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
1. ‚úÖ In-memory ‚Üí SQLite (–¥–∂–æ–±—ã –Ω–µ —Ç–µ—Ä—è—é—Ç—Å—è)
2. ‚úÖ –î–æ–±–∞–≤–∏–ª API key authentication
3. ‚úÖ –î–æ–±–∞–≤–∏–ª –≤–∞–ª–∏–¥–∞—Ü–∏—é –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
4. ‚úÖ SSH retry —Å exponential backoff
5. ‚úÖ Idempotent —Å–∫—Ä–∏–ø—Ç—ã (–º–æ–∂–Ω–æ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞—Ç—å)
6. ‚úÖ Debug mode ‚Üí Gunicorn production
7. ‚úÖ –ê–≤—Ç–æ–æ—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö –¥–∂–æ–±–æ–≤
8. ‚úÖ –õ–æ–≥–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –≤ /tmp
9. ‚úÖ –£–ª—É—á—à–µ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
10. ‚úÖ SSH –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –î–æ–±–∞–≤–ª–µ–Ω–æ:
- ‚úÖ 4 –Ω–æ–≤—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (Outline, Vaultwarden, 3X-UI, FileBrowser)
- ‚úÖ Systemd service —Ñ–∞–π–ª
- ‚úÖ –¢–µ—Å—Ç–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç
- ‚úÖ –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (RU + EN)
- ‚úÖ .env –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

---

## üí∞ –≠–∫–æ–Ω–æ–º–∏–∫–∞ —Ç–≤–æ–µ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞

### –¢–≤–æ–π —Å–µ—Ä–≤–µ—Ä: 3 vCPU / 8GB RAM / 150GB

**–ß—Ç–æ –≤–ª–µ–∑–µ—Ç –æ—Ç–ª–∏—á–Ω–æ:**
```
‚úÖ WireGuard + n8n + Vaultwarden + FileBrowser
   –ò—Ç–æ–≥–æ: ~410MB RAM (–æ—Å—Ç–∞—ë—Ç—Å—è 7.6GB –±—É—Ñ–µ—Ä–∞)

–ò–õ–ò

‚úÖ 3X-UI + n8n + Vaultwarden + FileBrowser
   –ò—Ç–æ–≥–æ: ~460MB RAM (–æ—Å—Ç–∞—ë—Ç—Å—è 7.5GB –±—É—Ñ–µ—Ä–∞)

–ò–õ–ò

‚úÖ Outline + WireGuard + FileBrowser
   –ò—Ç–æ–≥–æ: ~580MB RAM (–æ—Å—Ç–∞—ë—Ç—Å—è 7.4GB –±—É—Ñ–µ—Ä–∞)
```

**–ú–æ–¥–µ–ª—å: 1 —Å–µ—Ä–≤–µ—Ä = 1 –∫–ª–∏–µ–Ω—Ç (—Ä–µ–∫–æ–º–µ–Ω–¥—É—é)**
- Cost: $6.50/–º–µ—Å
- Price: $9.99/–º–µ—Å
- Margin: $3.50/–º–µ—Å (35%)

**–ù–∞ 50 –∫–ª–∏–µ–Ω—Ç–∞—Ö:**
- Revenue: $500/–º–µ—Å
- Costs: $325/–º–µ—Å
- Profit: $175/–º–µ—Å ($2,100/–≥–æ–¥)

–ù–µ –º–∏–ª–ª–∏–æ–Ω, –Ω–æ –æ—Ç–ª–∏—á–Ω—ã–π lifestyle –±–∏–∑–Ω–µ—Å! üéØ

---

## üéì –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ:
1. –ù–∞—á–Ω–∏ —Å dedicated (1 –∫–ª–∏–µ–Ω—Ç = 1 —Å–µ—Ä–≤–µ—Ä)
2. –ò—Å–ø–æ–ª—å–∑—É–π systemd service –¥–ª—è –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫–∞
3. –ù–ï –æ—Ç–∫—Ä—ã–≤–∞–π API –Ω–∞—Ä—É–∂—É (VPN/firewall)
4. –°–ª–µ–¥–∏ –∑–∞ –ª–æ–≥–∞–º–∏ –ø–µ—Ä–≤—ã–µ –Ω–µ–¥–µ–ª–∏

### –ë–∏–∑–Ω–µ—Å:
1. –§–æ–∫—É—Å –Ω–∞ —Ä—É—Å—Å–∫–∏–π —Ä—ã–Ω–æ–∫ (3X-UI = killer feature)
2. –°–æ–±–∏—Ä–∞–π feedback –æ—Ç –ø–µ—Ä–≤—ã—Ö 10 –∫–ª–∏–µ–Ω—Ç–æ–≤
3. –ù–µ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–π –ø–æ–∫–∞ –Ω–µ –Ω–∞–π–¥—ë—à—å PMF
4. Retention –≤–∞–∂–Ω–µ–µ acquisition

### –ú–∞—Ä–∫–µ—Ç–∏–Ω–≥:
1. "VPN –∫–æ—Ç–æ—Ä—ã–π —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –†–æ—Å—Å–∏–∏" - –≥–ª–∞–≤–Ω–æ–µ USP
2. "$300 SaaS –∑–∞ $10" - –ø–æ–Ω—è—Ç–Ω–∞—è —Ü–µ–Ω–Ω–æ—Å—Ç—å
3. Habr, VC.ru, Telegram - –æ—Å–Ω–æ–≤–Ω—ã–µ –∫–∞–Ω–∞–ª—ã
4. Word of mouth - –¥–µ–ª–∞–π —Ç–∞–∫ —Ö–æ—Ä–æ—à–æ —á—Ç–æ–±—ã —Å–æ–≤–µ—Ç–æ–≤–∞–ª–∏

---

## üöÄ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

### –°–µ–≥–æ–¥–Ω—è:
```bash
1. cd /opt/vps-provisioner
2. python app.py
3. python test_api.py YOUR_IP root password n8n
4. –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç ‚úÖ
```

### –≠—Ç–∞ –Ω–µ–¥–µ–ª—è:
1. –î–µ–ø–ª–æ–π –≤ production (systemd)
2. –ü—Ä–æ—Å—Ç–æ–π landing page
3. –ù–∞—Å—Ç—Ä–æ–π DNS
4. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –±–∏–ª–ª–∏–Ω–≥–æ–º

### –≠—Ç–æ—Ç –º–µ—Å—è—Ü:
1. –ü–µ—Ä–≤—ã–µ 5-10 –∫–ª–∏–µ–Ω—Ç–æ–≤
2. –°–æ–±–µ—Ä—å feedback
3. –î–æ–ø–∏–ª–∏ bugs
4. –î–æ–±–∞–≤—å –µ—â—ë 2-3 –∞–ø–ø–∞

---

## ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!

–í—Å—ë —á—Ç–æ –Ω—É–∂–Ω–æ:
- ‚úÖ Production-ready –∫–æ–¥
- ‚úÖ 6 –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π
- ‚úÖ –í—Å–µ best practices
- ‚úÖ –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- ‚úÖ –¢–µ—Å—Ç–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç

**–ü—Ä–æ—Å—Ç–æ –∑–∞–ø—É—Å—Ç–∏ –∏ –Ω–∞—á–∏–Ω–∞–π!** üéâ

```bash
python app.py
```

---

**–í–æ–ø—Ä–æ—Å—ã? –ß–∏—Ç–∞–π ANSWERS.md!** üìñ

**–•–æ—á–µ—à—å –±—ã—Å—Ç—Ä–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å? –ß–∏—Ç–∞–π QUICKSTART.md!** ‚ö°

**–•–æ—á–µ—à—å –ø–æ–Ω—è—Ç—å –∫–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç? –ß–∏—Ç–∞–π PROJECT_STRUCTURE.md!** üèóÔ∏è

**–£–¥–∞—á–∏ —Å –∑–∞–ø—É—Å–∫–æ–º! üöÄüí∞**
